<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novacortex Project Budget Tracker</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
            min-height: 100vh;
            color: #333;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .contract-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .summary-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .summary-card.contract {
            border-left: 5px solid #e74c3c;
        }

        .summary-card.additional {
            border-left: 5px solid #f39c12;
        }

        .summary-card.total {
            border-left: 5px solid #2ecc71;
        }

        .summary-value {
            font-size: 2.5rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .summary-label {
            color: #7f8c8d;
            font-size: 1.1rem;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .section-title {
            font-size: 1.5rem;
            color: #2c3e50;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .task-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        .task-table th,
        .task-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid #ecf0f1;
        }

        .task-table th {
            background: #f8f9fa;
            font-weight: 600;
            color: #2c3e50;
        }

        .task-table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .status-complete {
            background: rgba(46, 204, 113, 0.1);
            color: #27ae60;
        }

        .status-progress {
            background: rgba(243, 156, 18, 0.1);
            color: #f39c12;
        }

        .status-planned {
            background: rgba(52, 152, 219, 0.1);
            color: #3498db;
        }

        .editable {
            background: transparent;
            border: 1px solid transparent;
            padding: 5px;
            border-radius: 5px;
            transition: all 0.3s ease;
        }

        .editable:hover {
            background: #ecf0f1;
            border-color: #bdc3c7;
        }

        .editable:focus {
            background: white;
            border-color: #3498db;
            outline: none;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #3498db;
            color: white;
        }

        .btn-success {
            background: #27ae60;
            color: white;
        }

        .btn-warning {
            background: #f39c12;
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .add-task-form {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            display: none;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #2c3e50;
        }

        .form-group input,
        .form-group select {
            width: 100%;
            padding: 10px;
            border: 1px solid #bdc3c7;
            border-radius: 5px;
            font-size: 1rem;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .alert-warning {
            background: rgba(243, 156, 18, 0.1);
            border-left: 4px solid #f39c12;
            color: #d35400;
        }

        .alert-info {
            background: rgba(52, 152, 219, 0.1);
            border-left: 4px solid #3498db;
            color: #2980b9;
        }

        .export-section {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .task-table {
                font-size: 0.9rem;
            }
            
            .task-table th,
            .task-table td {
                padding: 10px 8px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                <i class="fas fa-calculator"></i>
                Novacortex Project Budget Tracker
            </h1>
            <p style="color: #7f8c8d; margin-top: 10px;">
                Real-time budget tracking with contract vs. additional work separation
            </p>
        </div>

        <!-- Contract Summary -->
        <div class="contract-summary">
            <div class="summary-card contract">
                <div class="summary-value" style="color: #e74c3c;" id="contract-hours">40.0</div>
                <div class="summary-label">Contract Hours Used</div>
                <small style="color: #95a5a6;">Original SOW Complete</small>
            </div>
            <div class="summary-card additional">
                <div class="summary-value" style="color: #f39c12;" id="additional-hours">8.5</div>
                <div class="summary-label">Additional Hours</div>
                <small style="color: #95a5a6;">Out-of-scope value-add</small>
            </div>
            <div class="summary-card total">
                <div class="summary-value" style="color: #2ecc71;" id="total-hours">48.5</div>
                <div class="summary-label">Total Hours Invested</div>
                <small style="color: #95a5a6;">Including premium work</small>
            </div>
        </div>

        <!-- Budget Alert -->
        <div class="alert alert-warning">
            <strong><i class="fas fa-exclamation-triangle"></i> Contract Status:</strong> 
            Original 40-hour contract is COMPLETE. All additional work is out-of-scope premium value-add that can be billed separately or used for client relationship building.
        </div>

        <!-- Contract Work Section -->
        <div class="section">
            <div class="section-title">
                <i class="fas fa-file-contract"></i>
                Contract Work (Original SOW)
            </div>
            
            <table class="task-table" id="contract-tasks">
                <thead>
                    <tr>
                        <th>Deliverable</th>
                        <th>Planned Hours</th>
                        <th>Actual Hours</th>
                        <th>Status</th>
                        <th>Week Completed</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Core Prompt Architecture</td>
                        <td>12-14</td>
                        <td><input type="number" class="editable" value="15.2" step="0.1" onchange="updateTotals()"></td>
                        <td><span class="status-badge status-complete">Complete</span></td>
                        <td>Week 1</td>
                        <td><input type="text" class="editable" value="110% of scope + enhancements" style="width: 200px;"></td>
                    </tr>
                    <tr>
                        <td>Therapeutic Specialization</td>
                        <td>10-12</td>
                        <td><input type="number" class="editable" value="11.8" step="0.1" onchange="updateTotals()"></td>
                        <td><span class="status-badge status-complete">Complete</span></td>
                        <td>Week 1-2</td>
                        <td><input type="text" class="editable" value="Oncology specialist complete" style="width: 200px;"></td>
                    </tr>
                    <tr>
                        <td>Testing Environment</td>
                        <td>8-10</td>
                        <td><input type="number" class="editable" value="6.2" step="0.1" onchange="updateTotals()"></td>
                        <td><span class="status-badge status-complete">Complete</span></td>
                        <td>Week 2</td>
                        <td><input type="text" class="editable" value="Framework + PromptLayer integration" style="width: 200px;"></td>
                    </tr>
                    <tr>
                        <td>Output Formatting</td>
                        <td>6-8</td>
                        <td><input type="number" class="editable" value="6.8" step="0.1" onchange="updateTotals()"></td>
                        <td><span class="status-badge status-complete">Complete</span></td>
                        <td>Week 2</td>
                        <td><input type="text" class="editable" value="Investment memo format complete" style="width: 200px;"></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Additional Work Section -->
        <div class="section">
            <div class="section-title">
                <i class="fas fa-star"></i>
                Additional Work (Out-of-Scope Value-Add)
            </div>
            
            <div class="alert alert-info">
                <strong><i class="fas fa-info-circle"></i> Note:</strong>
                This work was not in the original contract but provides significant client value. Can be billed separately or considered relationship investment.
            </div>

            <table class="task-table" id="additional-tasks">
                <thead>
                    <tr>
                        <th>Task</th>
                        <th>Hours Spent</th>
                        <th>Status</th>
                        <th>Value to Client</th>
                        <th>Billable?</th>
                        <th>Notes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Premium Executive Dashboard</td>
                        <td><input type="number" class="editable" value="3.5" step="0.1" onchange="updateTotals()"></td>
                        <td><span class="status-badge status-complete">Complete</span></td>
                        <td>$2,500</td>
                        <td>
                            <select class="editable">
                                <option value="relationship">Relationship Building</option>
                                <option value="billable">Billable Extra</option>
                            </select>
                        </td>
                        <td><input type="text" class="editable" value="Interactive HTML dashboard" style="width: 150px;"></td>
                    </tr>
                    <tr>
                        <td>Advanced PDF Processing</td>
                        <td><input type="number" class="editable" value="2.8" step="0.1" onchange="updateTotals()"></td>
                        <td><span class="status-badge status-complete">Complete</span></td>
                        <td>$1,800</td>
                        <td>
                            <select class="editable">
                                <option value="relationship">Relationship Building</option>
                                <option value="billable">Billable Extra</option>
                            </select>
                        </td>
                        <td><input type="text" class="editable" value="Complex chart/table extraction" style="width: 150px;"></td>
                    </tr>
                    <tr>
                        <td>Budget Tracking System</td>
                        <td><input type="number" class="editable" value="2.2" step="0.1" onchange="updateTotals()"></td>
                        <td><span class="status-badge status-progress">In Progress</span></td>
                        <td>$800</td>
                        <td>
                            <select class="editable">
                                <option value="relationship" selected>Relationship Building</option>
                                <option value="billable">Billable Extra</option>
                            </select>
                        </td>
                        <td><input type="text" class="editable" value="This interactive tracker" style="width: 150px;"></td>
                    </tr>
                </tbody>
            </table>

            <button class="btn btn-primary" onclick="toggleAddTaskForm()">
                <i class="fas fa-plus"></i>
                Add New Task
            </button>

            <!-- Add Task Form -->
            <div class="add-task-form" id="add-task-form">
                <h4 style="margin-bottom: 15px;">Add New Additional Task</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                    <div class="form-group">
                        <label>Task Name</label>
                        <input type="text" id="new-task-name" placeholder="e.g., Client Training Materials">
                    </div>
                    <div class="form-group">
                        <label>Hours Spent</label>
                        <input type="number" id="new-task-hours" step="0.1" placeholder="0.0">
                    </div>
                    <div class="form-group">
                        <label>Status</label>
                        <select id="new-task-status">
                            <option value="planned">Planned</option>
                            <option value="progress">In Progress</option>
                            <option value="complete">Complete</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Client Value</label>
                        <input type="text" id="new-task-value" placeholder="$500">
                    </div>
                    <div class="form-group">
                        <label>Billing Status</label>
                        <select id="new-task-billing">
                            <option value="relationship">Relationship Building</option>
                            <option value="billable">Billable Extra</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Notes</label>
                        <input type="text" id="new-task-notes" placeholder="Brief description">
                    </div>
                </div>
                <div style="margin-top: 15px;">
                    <button class="btn btn-success" onclick="addNewTask()">
                        <i class="fas fa-check"></i>
                        Add Task
                    </button>
                    <button class="btn" onclick="toggleAddTaskForm()" style="background: #95a5a6; color: white; margin-left: 10px;">
                        Cancel
                    </button>
                </div>
            </div>
        </div>

        <!-- Export Section -->
        <div class="section">
            <div class="section-title">
                <i class="fas fa-download"></i>
                Data Export & GitHub Integration
            </div>
            
            <p style="margin-bottom: 20px; color: #7f8c8d;">
                Export data to CSV for GitHub integration and backup. This allows you to version control your budget data and share with the client.
            </p>

            <div class="export-section">
                <button class="btn btn-success" onclick="exportToCSV()">
                    <i class="fas fa-file-csv"></i>
                    Export to CSV
                </button>
                <button class="btn btn-primary" onclick="generateGitHubReadme()">
                    <i class="fab fa-github"></i>
                    Generate README.md
                </button>
                <button class="btn btn-warning" onclick="saveToLocalStorage()">
                    <i class="fas fa-save"></i>
                    Save Progress
                </button>
            </div>

            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 8px;">
                <h4 style="margin-bottom: 10px;">GitHub Pages Setup Instructions:</h4>
                <ol style="color: #7f8c8d; line-height: 1.6;">
                    <li>Create new repo: <code>novacortex-budget-tracker</code></li>
                    <li>Upload this HTML file as <code>index.html</code></li>
                    <li>Upload exported CSV as <code>budget-data.csv</code></li>
                    <li>Enable GitHub Pages in repo settings</li>
                    <li>Share URL with Christopher: <code>https://yourusername.github.io/novacortex-budget-tracker</code></li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        // Load data from localStorage on page load
        window.onload = function() {
            loadFromLocalStorage();
            updateTotals();
        };

        function updateTotals() {
            // Calculate contract hours
            const contractInputs = document.querySelectorAll('#contract-tasks input[type="number"]');
            let contractTotal = 0;
            contractInputs.forEach(input => {
                contractTotal += parseFloat(input.value) || 0;
            });

            // Calculate additional hours
            const additionalInputs = document.querySelectorAll('#additional-tasks input[type="number"]');
            let additionalTotal = 0;
            additionalInputs.forEach(input => {
                additionalTotal += parseFloat(input.value) || 0;
            });

            // Update display
            document.getElementById('contract-hours').textContent = contractTotal.toFixed(1);
            document.getElementById('additional-hours').textContent = additionalTotal.toFixed(1);
            document.getElementById('total-hours').textContent = (contractTotal + additionalTotal).toFixed(1);

            // Auto-save to localStorage
            saveToLocalStorage();
        }

        function toggleAddTaskForm() {
            const form = document.getElementById('add-task-form');
            form.style.display = form.style.display === 'none' ? 'block' : 'none';
        }

        function addNewTask() {
            const name = document.getElementById('new-task-name').value;
            const hours = document.getElementById('new-task-hours').value;
            const status = document.getElementById('new-task-status').value;
            const value = document.getElementById('new-task-value').value;
            const billing = document.getElementById('new-task-billing').value;
            const notes = document.getElementById('new-task-notes').value;

            if (!name || !hours) {
                alert('Please fill in task name and hours');
                return;
            }

            const tbody = document.querySelector('#additional-tasks tbody');
            const newRow = tbody.insertRow();
            
            const statusClass = status === 'complete' ? 'status-complete' : 
                              status === 'progress' ? 'status-progress' : 'status-planned';
            const statusText = status === 'complete' ? 'Complete' : 
                             status === 'progress' ? 'In Progress' : 'Planned';

            newRow.innerHTML = `
                <td>${name}</td>
                <td><input type="number" class="editable" value="${hours}" step="0.1" onchange="updateTotals()"></td>
                <td><span class="status-badge ${statusClass}">${statusText}</span></td>
                <td>${value}</td>
                <td>
                    <select class="editable">
                        <option value="relationship" ${billing === 'relationship' ? 'selected' : ''}>Relationship Building</option>
                        <option value="billable" ${billing === 'billable' ? 'selected' : ''}>Billable Extra</option>
                    </select>
                </td>
                <td><input type="text" class="editable" value="${notes}" style="width: 150px;"></td>
            `;

            // Clear form
            document.getElementById('new-task-name').value = '';
            document.getElementById('new-task-hours').value = '';
            document.getElementById('new-task-status').value = 'planned';
            document.getElementById('new-task-value').value = '';
            document.getElementById('new-task-billing').value = 'relationship';
            document.getElementById('new-task-notes').value = '';

            toggleAddTaskForm();
            updateTotals();
        }

        function exportToCSV() {
            let csv = 'Type,Task,Planned Hours,Actual Hours,Status,Week,Notes,Client Value,Billing Status\n';
            
            // Contract tasks
            const contractRows = document.querySelectorAll('#contract-tasks tbody tr');
            contractRows.forEach(row => {
                const cells = row.querySelectorAll('td');
                const task = cells[0].textContent;
                const planned = cells[1].textContent;
                const actual = cells[2].querySelector('input').value;
                const status = cells[3].textContent;
                const week = cells[4].textContent;
                const notes = cells[5].querySelector('input').value;
                
                csv += `Contract,"${task}","${planned}","${actual}","${status}","${week}","${notes}",,\n`;
            });

            // Additional tasks
            const additionalRows = document.querySelectorAll('#additional-tasks tbody tr');
            additionalRows.forEach(row => {
                const cells = row.querySelectorAll('td');
                const task = cells[0].textContent;
                const hours = cells[1].querySelector('input').value;
                const status = cells[2].textContent;
                const value = cells[3].textContent;
                const billing = cells[4].querySelector('select').value;
                const notes = cells[5].querySelector('input').value;
                
                csv += `Additional,"${task}",,"${hours}","${status}",,"${notes}","${value}","${billing}"\n`;
            });

            // Download CSV
            const blob = new Blob([csv], { type: 'text/csv' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'novacortex-budget-tracker.csv';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function generateGitHubReadme() {
            const contractHours = document.getElementById('contract-hours').textContent;
            const additionalHours = document.getElementById('additional-hours').textContent;
            const totalHours = document.getElementById('total-hours').textContent;

            const readme = `# Novacortex Biotech Investment System - Budget Tracker

## Project Summary
- **Contract Hours**: ${contractHours} (Original SOW Complete)
- **Additional Hours**: ${additionalHours} (Value-add work)
- **Total Investment**: ${totalHours} hours

## Budget Status
✅ **Contract Complete**: Original 40-hour SOW delivered successfully
⚠️ **Additional Work**: ${additionalHours} hours of out-of-scope premium enhancements

## Client Dashboard
View live budget tracker: [Budget Dashboard](https://yourusername.github.io/novacortex-budget-tracker)

## Data Files
- \`budget-data.csv\`: Exported budget data
- \`index.html\`: Interactive budget tracker
- \`README.md\`: This documentation

Last Updated: ${new Date().toLocaleDateString()}
`;

            const blob = new Blob([readme], { type: 'text/markdown' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'README.md';
            a.click();
            window.URL.revokeObjectURL(url);
        }

        function saveToLocalStorage() {
            const data = {
                contractTasks: [],
                additionalTasks: [],
                timestamp: new Date().toISOString()
            };

            // Save contract tasks
            document.querySelectorAll('#contract-tasks tbody tr').forEach(row => {
                const cells = row.querySelectorAll('td');
                data.contractTasks.push({
                    task: cells[0].textContent,
                    planned: cells[1].textContent,
                    actual: cells[2].querySelector('input').value,
                    status: cells[3].textContent,
                    week: cells[4].textContent,
                    notes: cells[5].querySelector('input').value
                });
            });

            // Save additional tasks
            document.querySelectorAll('#additional-tasks tbody tr').forEach(row => {
                const cells = row.querySelectorAll('td');
                data.additionalTasks.push({
                    task: cells[0].textContent,
                    hours: cells[1].querySelector('input').value,
                    status: cells[2].textContent,
                    value: cells[3].textContent,
                    billing: cells[4].querySelector('select').value,
                    notes: cells[5].querySelector('input').value
                });
            });

            localStorage.setItem('novacortexBudgetData', JSON.stringify(data));
            
            // Show save confirmation
            const btn = event.target;
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i> Saved!';
            setTimeout(() => {
                btn.innerHTML = originalText;
            }, 2000);
        }

        function loadFromLocalStorage() {
            const saved = localStorage.getItem('novacortexBudgetData');
            if (!saved) return;

            const data = JSON.parse(saved);
            
            // Load contract task values
            const contractRows = document.querySelectorAll('#contract-tasks tbody tr');
            contractRows.forEach((row, index) => {
                if (data.contractTasks[index]) {
                    const task = data.contractTasks[index];
                    row.querySelector('input[type="number"]').value = task.actual;
                    row.querySelector('input[type="text"]').value = task.notes;
                }
            });

            // Load additional task values
            const additionalRows = document.querySelectorAll('#additional-tasks tbody tr');
            additionalRows.forEach((row, index) => {
                if (data.additionalTasks[index]) {
                    const task = data.additionalTasks[index];
                    row.querySelector('input[type="number"]').value = task.hours;
                    row.querySelector('select').value = task.billing;
                    row.querySelector('input[type="text"]').value = task.notes;
                }
            });
        }

        // Auto-save every 30 seconds
        setInterval(saveToLocalStorage, 30000);
    </script>
</body>
</html>